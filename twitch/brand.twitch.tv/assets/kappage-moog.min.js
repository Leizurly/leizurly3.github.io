!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var s in e)t.d(n,s,function(t){return e[t]}.bind(null,s));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(module,exports){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Kappage=function(){function Kappage(e,t){var i=t.trigger,n=t.bg,s=t.root,o=t.sizer,a=t.delay,r=t.laxObjects,l=t.closeClassName,d=void 0===l?"kappage__close":l,c=t.baseurl,u=void 0===c?"/":c,h=t.pageurl,g=void 0===h?"/":h,p=t.unlink,v=t.pagekey,y=t.color,m=t.title,f=t.hiddenClass,b=void 0===f?"kappage--hidden":f,w=t.hidingClass,k=void 0===w?"kappage--hiding":w,x=t.revealClass,L=void 0===x?"kappage--reveal":x,S=t.revealingClass,C=void 0===S?"kappage--revealing":S,E=t.expanded;_classCallCheck(this,Kappage),this.el=e,this.trigger=i,this.bg=n,this.sizer=o,this.root=s,this.delay=a,this.laxObjects=r,this.closeClassName=d,this.moveObjects=this.trigger.querySelectorAll(".kappage--move"),this.baseurl=u,this.pageurl=g,this.pagekey=v,this.unlink=void 0!==p&&p,this.title=m,this.color=y,this.hiddenClass=b,this.hidingClass=k,this.revealClass=L,this.revealingClass=C,this.scroll=0,this.rootScroll=0,this.triggerPos={},this.expanded=void 0!==E&&E,this.unlink||this.addTriggerListener(),this.expanded&&this.addInnerListeners(),console.log("Initialised ".concat(this.pageurl))}return _createClass(Kappage,[{key:"startReveal",value:function(e,t){if(e&&e.preventDefault(),!this.expanded){this.expanded=!0,document.querySelector("body").style.backgroundColor=this.color,t||history.pushState({key:this.pagekey},this.title,this.pageurl),document.title=this.title,gtag("config","UA-117261801-5",{page_path:this.pageurl}),this.laxObjects.root.disable(),this.oldBgTransform=this.bg.style.transform,this.bg.style.setProperty("transform","".concat(this.calculateEmbiggening(this.trigger.getBoundingClientRect())),"important"),this.bg.style.transformOrigin="top left",this.trigger.style.zIndex="999999";var i=!0,n=!1,s=void 0;try{for(var o,a=this.moveObjects[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=o.value,l=this.calculatePositionString(r.dataset.kappX),d=this.calculatePositionString(r.dataset.kappY),c=r.getBoundingClientRect(),u=c.x,h=c.y;r.style.transform=["translateX(".concat((l-u).toFixed(2),"px)"),"translateY(".concat((d-h).toFixed(2),"px)")].join(" "),r.dataset.kappOther&&(r.style.transform+=" ".concat(r.dataset.kappOther))}}catch(e){n=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}this.rootScroll=window.scrollY,document.querySelector("body").style.overflow="hidden",setTimeout(this.continueReveal.bind(this),1)}}},{key:"continueReveal",value:function(){this.trigger.classList.add(this.revealingClass),window.disableKappageNav||setTimeout(this.endReveal.bind(this),this.delay)}},{key:"endReveal",value:function(){this.root.classList.add(this.hiddenClass),this.el.classList.add(this.revealClass);try{window.scrollTo(0,0)}catch(e){}this.trigger.classList.remove(this.revealingClass),this.bg.style.transform=this.oldBgTransform,this.bg.style.transformOrigin="center center",this.trigger.style.zIndex="500";var e=!0,t=!1,i=void 0;try{for(var n,s=this.moveObjects[Symbol.iterator]();!(e=(n=s.next()).done);e=!0)n.value.style.transform=""}catch(e){t=!0,i=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}window.calculateAnchors(),window.initLottie&&window.initLottie(),this.laxObjects[this.pagekey].isSetup||(console.log("Setting up ".concat(this.pagekey)),this.laxObjects[this.pagekey].setup({selector:"#kappage__"+this.pagekey+"__content .lax",breakpoints:{mobile:0,desktop:1e3}})),this.laxObjects[this.pagekey].enable(),window.updateAnchors(),Object.keys(laxObjects).forEach((function(e){laxObjects[e].updateElements()})),this.addInnerListeners(),document.querySelector("body").style.overflow=null}},{key:"startHide",value:function(e,t){if(e&&e.preventDefault(),this.expanded){this.removeInnerListeners(),this.laxObjects[this.pagekey].disable(),window.animationEls&&window.animationEls.forEach((function(e){e.stop()})),document.querySelector(".b-together--page").classList.remove("gone"),document.querySelector("#js-gamebox").classList.remove("is-active"),document.querySelector("html").style.height=null,window.gameRunning=!1,document.querySelector("body").style.backgroundColor="#000000",t||history.pushState({key:"root"},"Meet your new Twitch | Twitch Brand",this.baseurl),document.title="Meet your new Twitch | Twitch Brand",gtag("config","UA-117261801-5",{page_path:this.baseurl}),this.scroll=window.scrollY,this.el.classList.add(this.hidingClass);try{this.el.scrollTo(0,this.scroll)}catch(e){}if(this.root.classList.remove(this.hiddenClass),this.rootScroll)try{window.scrollTo(0,this.rootScroll)}catch(e){}else this.sizer&&this.sizer.scrollIntoView({block:"center"});setTimeout(this.continueHide.bind(this),1)}}},{key:"continueHide",value:function(){window.calculateAnchors(),this.laxObjects.root.isSetup||(console.log("Setting up root"),this.laxObjects.root.setup({selector:"#kappage__root__content .lax",breakpoints:{mobile:0,desktop:1e3}})),this.laxObjects.root.enable(),this.laxObjects.root.update(window.scrollY),window.updateAnchors(),Object.keys(laxObjects).forEach((function(e){laxObjects[e].updateElements()})),document.querySelector("body").style.overflow="hidden",this.triggerPos=this.trigger.getBoundingClientRect(),this.el.style.transform=this.calculateShrinkage(),setTimeout(this.endHide.bind(this),this.delay)}},{key:"endHide",value:function(){this.el.classList.remove(this.revealClass),this.el.classList.remove(this.hidingClass),this.el.style.transform="",this.expanded=!1,document.querySelector("body").style.overflow=null}},{key:"calculateShrinkage",value:function(){var e=this.triggerPos,t=e.width,i=void 0===t?window.innerWidth-160:t,n=e.height,s=void 0===n?window.innerHeight-160:n,o=e.x,a=void 0===o?80:o,r=e.y,l=void 0===r?80:r,d=i/window.innerWidth,c=s/window.innerHeight;return["translateX(".concat(a.toFixed(2),"px)"),"translateY(".concat(l.toFixed(2),"px)"),"scaleX(".concat(d,")"),"scaleY(".concat(c,")")].join(" ")}},{key:"calculateEmbiggening",value:function(e){var t=e.width,i=void 0===t?window.innerWidth-160:t,n=e.height,s=void 0===n?window.innerHeight-160:n,o=e.x,a=void 0===o?80:o,r=e.y,l=void 0===r?80:r,d=window.innerWidth/i,c=window.innerHeight/s;return["translateX(".concat(-1*a.toFixed(2),"px)"),"translateY(".concat(-1*l.toFixed(2),"px)"),"scaleX(".concat(d,")"),"scaleY(".concat(c,")")].join(" ")}},{key:"calculatePositionString",value:function(pos){return pos=pos.replace(/vw/,window.innerWidth).replace(/vh/,window.innerHeight),eval(pos)}},{key:"addTriggerListener",value:function(){this.trigger&&this.trigger.addEventListener("click",this.startReveal.bind(this),{capture:!0})}},{key:"addInnerListeners",value:function(){this.el&&this.el.addEventListener("click",this.clickHandler.bind(this),{capture:!0})}},{key:"removeInnerListeners",value:function(){this.el&&this.el.removeEventListener("click",this.clickHandler.bind(this),{capture:!0})}},{key:"clickHandler",value:function(e){e.target.classList.contains(this.closeClassName)&&(e.preventDefault(),this.startHide.bind(this)())}}]),Kappage}();window.Kappage=Kappage},function(e,t,i){"use strict";i.r(t),i(0);class n{constructor(){this.sounds={},this.instances=[],this.default_volume=1}load(e,t,i){return this.sounds[e]=new Audio(t),"function"==typeof i?void this.sounds[e].addEventListener("canplaythrough",i):new Promise((t,i)=>{this.sounds[e].addEventListener("canplaythrough",t),this.sounds[e].addEventListener("error",i)})}remove(e){void 0!==this.sounds&&delete this.sounds[e]}play(e,t,i=null,n=!1){if(void 0===this.sounds[e])return console.error("Can't find sound called '"+e+"'."),!1;var s=this.sounds[e].cloneNode(!0);return s.volume="number"==typeof i?i:this.default_volume,s.loop=n,s.play(),this.instances.push(s),s.addEventListener("ended",()=>{let e=this.instances.indexOf(s);-1!=e&&this.instances.splice(e,1)}),"function"==typeof t?(s.addEventListener("ended",t),!0):new Promise(e=>s.addEventListener("ended",e))}stop_all(){let e=this.instances.slice();for(let t of e)t.pause(),t.dispatchEvent(new Event("ended"))}}n.version="0.3.8",function(){function e(){function e(e){t.play(e)}new(window.AudioContext||window.webkitAudioContext);var t=new n;t.load("note-F","/sounds/darude-f-fixed.mp3"),t.load("note-G","/sounds/darude-g-fixed.mp3"),t.load("note-A","/sounds/darude-a-fixed.mp3"),t.load("note-B","/sounds/darude-all-fixed.mp3");var i=document.getElementById("moog-key-f"),s=document.getElementById("moog-key-g"),o=document.getElementById("moog-key-a"),a=document.getElementById("moog-key-b"),r=document.getElementById("moog-emotes-f"),l=document.getElementById("moog-emotes-g"),d=document.getElementById("moog-emotes-a"),c=document.getElementById("moog-emotes-b"),u=document.getElementById("b-moog-exit"),h={f:{emoteScreen:r,sound:"note-F"},g:{emoteScreen:l,sound:"note-G"},a:{emoteScreen:d,sound:"note-A"}};[i,s,o].forEach((function(t){t.addEventListener("click",(function(){var i=h[t.id[t.id.length-1]];gtag("event",i.sound);var n=i.emoteScreen;n.classList.contains("is-animated")||(n.classList.add("is-animated"),e(i.sound),setTimeout((function(){n.classList.remove("is-animated")}),3e3))}))}));var g=null;a.addEventListener("click",(function(){c.classList.add("is-animated"),gtag("event","note-B"),e("note-B"),g=setInterval((function(){e("note-B")}),6100)})),u.addEventListener("click",(function(){c.classList.remove("is-animated"),t.stop_all(),g&&(clearInterval(g),g=null)}))}"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(function(){e()}))}()}]);